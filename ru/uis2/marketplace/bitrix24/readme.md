# Интеграция с Битрикс24<br />

## ВАЖНО! <br />
* Для корректной работы интеграции, необходимо, чтобы у каждого сотрудника было занесено поле "Фамилия" в профиле портала Битрикс24<br />
* Не забудьте установить приложение UIS 2.0 в маркетплейсе Битрикс24 <br />

____

## После активации вам будут доступно:<br />

### Чаты и офлайн заявки<br />

- Создание сущностей при получении чатов и передача содержимого переписки в сущности Битрикс24;<br />
- Создание сущностей при получении офлайн заявок и передача содержимого заявки в сущности Битрикс24;<br />

### Общие<br />
- Фильтрация звонков, чатов, офлайн сообщений по различным сценариям;<br />
- Фильтрация ответственных за сущности по различным сценариям;<br />
- Шаблоны названий для вновь созданных сущностей;<br />
- Передача дополнительных полей в сущности Битрикс24;<br />
- Оповещения о созданных сущностях;<br />

____
## Настройка интеграции<br />
<details>
  <summary style="font-weight:bold;"> Установка </summary> <br />

Существует два способа установки интеграции с Битрикс24:<br />

1. Установить интеграцию через [Личный кабинет UIS](https://go.uiscom.ru/marketplace/integration_list/bitrix24), нажав кнопку "Подключить интеграцию".
    - Далее необходимо завести учетные данные: название (может быть любым) и адрес вашего портала Битрикс24.

2. Из маркетплейса Битрикс24.</br> После установки приложения откроется окно с приглашением завершить установку в ЛК UIS.
    - При установке из маркетплейса Битрикс24 заводить учетные данные не нужно, они будут созданы автоматически.

</details>
<details>
  <summary style="font-weight:bold;"> Настройка </summary> <br />

1. В окне настроек интеграции 2 вкладки: Главная, Чаты и офлайн завки<br />


> Важно! 
> 
> После внесения настроек в любой из вкладок необходимо нажать кнопку "Сохранить" внизу экрана, а затем уже переходить к следующей вкладке
> 
> Во каждой из вкладок есть флажок "Интеграция активна" для корректной работы необходимой части интеграции нужно следить, чтобы этот флажок был активирован.
> 
> Флажок "Интеграция Активна" всегда должен быть включен во вкладке Главная

2. Выбрать необходимые учетные данные, для доступа к настройкам интеграции.<br />
</details>

<details>
  <summary style="font-weight:bold;"> Вкладка Главная </summary> <br />


В данной вкладке доступна кнопка Ручная синхронизация - это синхронизация сущностей, необходимая для работы интеграции<br />

<details>
  <summary style="font-weight:bold;"> Вкладка Чаты </summary> <br />
    
#### Чаты

1. Выбор канала чатов, которые будет отслеживать интеграция<br />
2. Фильтр ответственных за чаты<br />
3. Ответственный по-умолчанию во всех остальных случаях<br />
4. Выбор создавать ли сущности при первичном или повторном обращении.<br />
5. Выбор какого типа сущности будут создаваться<br />
- Лид/Сделка
- Дело
- Лид/Сделка + Дело
6. Создание сущности при начале или завершении чатов оператором.<br />
7. Выбор передавать ли чаты без контактных данных.<br />
8. Выбор отправлять ли уведомления ответственному при создании сущности.<br />

#### Офлайн заявки

1. Фильтр ответственных за офлайн заявки<br />
2. Ответственный по-умолчанию во всех остальных случаях.<br />
3. Выбор создавать ли сущности при первичном или повторном обращении.<br />
4. Выбор какого типа сущности будут создаваться<br />
- Лид/Сделка
- Дело
- Лид/Сделка + Дело
5. Создание сущности при начале или завершении чатов оператором.<br />
6. Выбор отправлять ли уведомления ответственному при создании сущности.<br />

#### Фильтрация<br />

Отдельно фильтруются чаты и офлайн заявки. Также можно группировать фильтры при помощи операторов И/ИЛИ<br />

#### Сопоставление полей<br />

Можно сопоставить поле из API UIS с полем Битрикс24.<br />

![04_mapping.png](04_mapping.png)

</details>
